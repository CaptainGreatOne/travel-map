---
phase: 22-deployment-preparation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [README.md, supabase/seed.sql, docs/ENVIRONMENT.md]
autonomous: true
---

<objective>
Create comprehensive documentation and consolidated database setup for deployment.

Purpose: Enable anyone to clone, configure, and run the application with clear instructions. Consolidate all migrations into a single seed file for fresh deployments.
Output: Complete README.md, environment variable documentation, consolidated Supabase SQL file.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@package.json
@.env.example
@supabase/migrations/001_core_tables.sql
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create comprehensive README.md</name>
  <files>README.md</files>
  <action>
Replace the default Vite README with a comprehensive project README including:

1. **Project Title and Description**
   - Travel Map: Interactive companion app for a travel vlog YouTube channel
   - Brief feature list (interactive map, location suggestions, photography gallery, admin panel)

2. **Features Section**
   - Interactive Leaflet map with 600+ location markers
   - Category and status filtering
   - Location suggestions with Google Maps URL parsing
   - Photography gallery with admin CMS
   - About page with dynamic stats and Instagram feed
   - Admin panel for content management

3. **Tech Stack**
   - React 19 + Vite
   - Tailwind CSS
   - Leaflet + react-leaflet + react-leaflet-cluster
   - Supabase (Auth, Database, Storage)
   - Vitest for testing

4. **Prerequisites**
   - Node.js 18+
   - npm or pnpm
   - Supabase account (free tier works)

5. **Installation Steps**
   ```bash
   git clone <repo-url>
   cd trave-map
   npm install
   cp .env.example .env.local
   # Edit .env.local with Supabase credentials
   npm run dev
   ```

6. **Environment Variables** (reference docs/ENVIRONMENT.md)

7. **Database Setup**
   - Point to supabase/seed.sql for fresh setup
   - Explain migrations folder for incremental updates

8. **Development Commands**
   - npm run dev, build, lint, test, test:watch

9. **Project Structure** (brief overview of src/ directories)

10. **License** (MIT or as appropriate)

Keep it concise but complete. Target ~150-200 lines.
  </action>
  <verify>README.md exists with installation section: grep -n "npm install" README.md</verify>
  <done>README.md contains project description, features, tech stack, installation steps, and usage instructions</done>
</task>

<task type="auto">
  <name>Task 2: Create environment variable documentation</name>
  <files>docs/ENVIRONMENT.md</files>
  <action>
Create docs/ directory and ENVIRONMENT.md with detailed env var documentation:

1. **Required Variables**
   - VITE_SUPABASE_URL: Your Supabase project URL (from Settings > API)
   - VITE_SUPABASE_ANON_KEY: Public anon key (from Settings > API)
   - VITE_ADMIN_EMAILS: Comma-separated list of admin email addresses

2. **How to Get Supabase Credentials**
   - Create project at supabase.com
   - Go to Project Settings > API
   - Copy Project URL and anon/public key

3. **Admin Access**
   - Users whose email is in VITE_ADMIN_EMAILS see the Admin menu item
   - Must be authenticated (logged in) to access admin features
   - Email comparison is case-insensitive

4. **Example .env.local**
   ```
   VITE_SUPABASE_URL=https://xyzcompany.supabase.co
   VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   VITE_ADMIN_EMAILS=admin@example.com,owner@example.com
   ```

5. **Security Notes**
   - Never commit .env.local to git
   - The anon key is safe to expose (RLS protects data)
   - Admin emails should be real accounts you control
  </action>
  <verify>docs/ENVIRONMENT.md exists: ls docs/ENVIRONMENT.md</verify>
  <done>Environment documentation created with all variables explained</done>
</task>

<task type="auto">
  <name>Task 3: Create consolidated seed.sql</name>
  <files>supabase/seed.sql</files>
  <action>
Concatenate all 16 migration files into a single seed.sql for fresh deployments:

1. Read all files in supabase/migrations/ in order (001 through 016)
2. Combine into supabase/seed.sql with comments marking each section
3. Add header comment explaining this is for fresh deployments

Format:
```sql
-- Travel Map Database Schema
-- Generated from migrations for fresh deployment
-- Run this in Supabase SQL Editor for new projects

-- ============================================
-- 001_core_tables.sql
-- ============================================
[contents]

-- ============================================
-- 002_suggestions_and_rate_limiting.sql
-- ============================================
[contents]

... and so on
```

Keep the original migrations folder intact (for reference and incremental updates).
  </action>
  <verify>supabase/seed.sql exists and contains all tables: grep -c "CREATE TABLE" supabase/seed.sql</verify>
  <done>Consolidated seed.sql created with all migrations combined</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] README.md is comprehensive with installation steps
- [ ] docs/ENVIRONMENT.md explains all env vars
- [ ] supabase/seed.sql consolidates all migrations
- [ ] npm run lint passes
</verification>

<success_criteria>

- README.md provides complete setup instructions
- Environment variables fully documented
- seed.sql enables one-command database setup
- All files pass linting
</success_criteria>

<output>
After completion, create `.planning/phases/22-deployment-preparation/22-01-SUMMARY.md`
</output>
