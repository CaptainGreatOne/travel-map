---
phase: 05-admin-panel
plan: 05
type: execute
wave: 4
depends_on: ["05-03", "05-04"]
files_modified: []
autonomous: false
---

<objective>
Verify the complete admin panel functionality.

Purpose: Ensure all admin features work correctly before completing the phase.
Output: Verified working admin panel with all CRUD operations.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
@./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-admin-panel/05-03-SUMMARY.md
@.planning/phases/05-admin-panel/05-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <action>Apply admin write policies migration to Supabase</action>
  <instructions>
Before testing the admin panel, you need to apply the write policies migration:

**File to run:**
`supabase/migrations/004_admin_write_policies.sql`

**How to apply:**
1. Go to your Supabase project dashboard
2. Navigate to **SQL Editor**
3. Create a new query
4. Copy and paste the contents of the migration file
5. Click **Run**

**Also:** Make sure your `.env` file has your admin email:
```
VITE_ADMIN_EMAILS=your-email@example.com
```

(Use the same email you log in with)
  </instructions>
  <verification>Policies created - check Supabase dashboard → Authentication → Policies</verification>
  <resume-signal>Type "migration applied" when done</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete admin panel with dashboard, location management, suggestion moderation, and video management</what-built>
  <how-to-verify>
1. **Start the dev server:**
   ```bash
   npm run dev
   ```

2. **Test admin access control:**
   - Log out if logged in
   - Try to access http://localhost:5173/admin
   - Should see "Access Denied" message
   - Log in with your admin email
   - Should now see admin dashboard

3. **Test Dashboard tab:**
   - Verify metrics cards show (Total Locations, Pending Suggestions, Total Reminders)
   - Numbers should match your database

4. **Test Locations tab:**
   - Click "Locations" tab
   - Verify list of locations displays
   - Click "Add Location" - fill form and save
   - Verify new location appears in list AND on the main map page
   - Edit an existing location - change a field and save
   - Delete a test location (be careful not to delete real data)

5. **Test Suggestions tab:**
   - Click "Suggestions" tab
   - If you have pending suggestions, verify they show
   - Test filter tabs (All, Pending, Approved, Rejected)
   - Approve or reject a suggestion
   - Verify status updates

6. **Test Videos tab:**
   - Click "Videos" tab
   - Add a new video (use any YouTube video ID, e.g., "dQw4w9WgXcQ")
   - Verify thumbnail loads
   - Link the video to a location
   - Delete the test video

7. **Check browser console:**
   - No errors should appear during normal operations
  </how-to-verify>
  <resume-signal>Type "approved" if everything works, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] User confirmed migration applied
- [ ] User verified all admin panel functionality
- [ ] No blocking issues reported
</verification>

<success_criteria>

- All verification steps passed
- Admin can perform all CRUD operations
- Non-admin access is properly blocked
- No console errors during normal use
</success_criteria>

<output>
After completion, create `.planning/phases/05-admin-panel/05-05-SUMMARY.md`
</output>
