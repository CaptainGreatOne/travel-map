---
phase: 19-instagram-feed
plan: 02
type: execute
wave: 2
depends_on: ["19-01"]
files_modified: [src/components/admin/AboutEditor.jsx, src/components/InstagramFeed.jsx, src/pages/AboutPage.jsx]
autonomous: true
---

<objective>
Add Instagram widget configuration to admin UI and display feed on About page.

Purpose: Enable admin to configure Instagram widget type and embed code, display feed on public About page.
Output: Extended AboutEditor with widget settings, InstagramFeed component, updated AboutPage.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-instagram-feed/19-CONTEXT.md
@.planning/phases/19-instagram-feed/19-01-SUMMARY.md

@src/components/admin/AboutEditor.jsx
@src/pages/AboutPage.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Instagram widget settings to AboutEditor</name>
  <files>src/components/admin/AboutEditor.jsx</files>
  <action>
Add "Instagram Feed" section to AboutEditor after the Social Links section:

1. Widget Type dropdown (select):
   - Options: "None (link only)", "LightWidget (third-party)", "Official Embed"
   - Maps to: 'none', 'lightwidget', 'official'

2. Instagram Username field (text input):
   - For deep link: instagram://user?username=X
   - Placeholder: "username (without @)"
   - Helper text: "Used for mobile app deep links"

3. Widget Embed Code (textarea, shown only when type != 'none'):
   - Multi-line textarea for pasting embed code
   - Helper text varies by type:
     - LightWidget: "Paste your LightWidget embed code from lightwidget.com"
     - Official: "Paste Instagram embed code"

4. Update handleSave to include:
   - instagram_widget_type
   - instagram_widget_code
   - instagram_username

Follow existing AboutEditor patterns (handleChange, input styling, grid layout).
  </action>
  <verify>npm run build succeeds</verify>
  <done>AboutEditor has Instagram Feed section with type dropdown, username field, and embed code textarea</done>
</task>

<task type="auto">
  <name>Task 2: Create InstagramFeed component</name>
  <files>src/components/InstagramFeed.jsx</files>
  <action>
Create new component src/components/InstagramFeed.jsx:

Props:
- widgetType: 'none' | 'lightwidget' | 'official'
- widgetCode: string (the embed HTML)
- username: string (for profile link)
- profileUrl: string (full Instagram URL from instagram_url)

Behavior:
1. If widgetType === 'none': Return null (don't render anything)

2. If widgetType === 'lightwidget' or 'official':
   - Render a section with heading "Follow on Instagram"
   - Use dangerouslySetInnerHTML to render widgetCode
     - Note: This is acceptable since admin-only content from DB
   - Add a "View Profile" button below the widget

3. Profile link logic (for View Profile button):
   - Desktop: Simple link to profileUrl with target="_blank"
   - Mobile detection: Check if touch device via window.matchMedia or navigator
   - Mobile with username: Try deep link `instagram://user?username=${username}`
   - Fallback: Regular profileUrl link

Use Tailwind for styling. Match existing About page section styling (bg-white, rounded-xl, shadow-md, padding).

Component should be self-contained and reusable.
  </action>
  <verify>npm run build succeeds</verify>
  <done>InstagramFeed component created with widget rendering and smart profile link</done>
</task>

<task type="auto">
  <name>Task 3: Integrate InstagramFeed into AboutPage</name>
  <files>src/pages/AboutPage.jsx</files>
  <action>
Add InstagramFeed component to AboutPage:

1. Import InstagramFeed from '../components/InstagramFeed'

2. Add InstagramFeed between "Connect With Me" section and Stats section:
   ```jsx
   <InstagramFeed
     widgetType={content?.instagram_widget_type || 'none'}
     widgetCode={content?.instagram_widget_code || ''}
     username={content?.instagram_username || ''}
     profileUrl={content?.instagram_url || 'https://instagram.com'}
   />
   ```

3. Keep existing Instagram button in "Connect With Me" section - it serves as fallback when widget type is 'none'

The component handles its own visibility (returns null when type is 'none').
  </action>
  <verify>npm run build succeeds</verify>
  <done>AboutPage renders InstagramFeed component with content from database</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds without errors
- [ ] AboutEditor has Instagram Feed section with all fields
- [ ] InstagramFeed component renders widget code when type != 'none'
- [ ] InstagramFeed has smart mobile/desktop profile link behavior
- [ ] AboutPage integrates InstagramFeed component
- [ ] Widget hidden when type is 'none' (default)
</verification>

<success_criteria>
- All tasks completed
- Admin can configure widget type and embed code
- About page shows Instagram feed when configured
- Mobile users can open Instagram app via deep link
</success_criteria>

<output>
After completion, create `.planning/phases/19-instagram-feed/19-02-SUMMARY.md`
</output>
