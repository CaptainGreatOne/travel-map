---
phase: 19-instagram-feed
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [supabase/migrations/015_instagram_widget_settings.sql, src/services/aboutService.js]
autonomous: true
---

<objective>
Add Instagram widget configuration fields to about_content table and extend aboutService.

Purpose: Store Instagram widget settings (embed type, widget code) for admin configuration.
Output: Migration file with new columns, extended aboutService with Instagram settings.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-instagram-feed/19-CONTEXT.md

@supabase/migrations/012_about_content_table.sql
@supabase/migrations/014_about_content_stats.sql
@src/services/aboutService.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Instagram widget columns to about_content table</name>
  <files>supabase/migrations/015_instagram_widget_settings.sql</files>
  <action>
Create migration to add Instagram widget columns to about_content table:

- instagram_widget_type TEXT DEFAULT 'none' - Options: 'none', 'lightwidget', 'official'
  - 'none': No widget displayed (just the existing profile link button)
  - 'lightwidget': Third-party LightWidget embed (works without API)
  - 'official': Instagram official embed (requires Meta API setup)

- instagram_widget_code TEXT - The embed code/script from widget provider
  - For LightWidget: The iframe/script snippet from lightwidget.com
  - For official: The Instagram embed code

- instagram_username TEXT - Instagram username (without @) for deep links
  - Used to construct app deep link: instagram://user?username=X
  - Extracted from instagram_url if not set

All columns nullable. No RLS changes needed - same policies apply.
  </action>
  <verify>Migration file exists with correct ALTER TABLE statements</verify>
  <done>Migration file created at supabase/migrations/015_instagram_widget_settings.sql</done>
</task>

<task type="auto">
  <name>Task 2: Extend aboutService for Instagram settings</name>
  <files>src/services/aboutService.js</files>
  <action>
No changes needed to aboutService.js - the existing fetchAboutContent() and updateAboutContent() functions already use `select('*')` which will automatically include the new columns after migration.

Verify this by reviewing the existing code:
- fetchAboutContent() does `.select('*')` - includes all columns
- updateAboutContent() spreads updates - can accept any fields

Document this in the SUMMARY.md - no code changes required, migration adds columns that are auto-included.
  </action>
  <verify>Confirm existing service functions handle new columns automatically</verify>
  <done>Verified aboutService.js needs no changes - select('*') handles new columns</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Migration file exists with correct column definitions
- [ ] Columns: instagram_widget_type, instagram_widget_code, instagram_username
- [ ] Default value 'none' for instagram_widget_type
- [ ] Confirmed aboutService needs no changes (select('*') pattern)
</verification>

<success_criteria>
- All tasks completed
- Migration ready to apply
- Service layer ready for new columns
</success_criteria>

<output>
After completion, create `.planning/phases/19-instagram-feed/19-01-SUMMARY.md`
</output>
