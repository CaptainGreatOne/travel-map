# Milestone v1.2: Content & Sharing

**Status:** âœ… SHIPPED 2026-02-01
**Phases:** 14-19
**Total Plans:** 10

## Overview

Added user-facing content enhancements (location sharing, richer popups) and admin content management (photos, about page, dynamic stats, Instagram feed).

## Phases

### Phase 14: Shareable Location URLs
**Goal**: Enable direct links to specific locations with auto-open popups
**Depends on**: Phase 13
**Plans**: 1 plan

Plans:
- [x] 14-01: URL sync and share button (read/write URL params, share icon in popup)

**Key work:**
- useSearchParams for bidirectional URL/popup state sync
- MapViewController pattern for programmatic map.setView()
- markerRefs pattern for programmatic popup control
- Share button with Link2 icon and copy feedback

### Phase 15: Enhanced Location Popup (DEFERRED)
**Goal**: Add Google Static Maps preview images with graceful fallback
**Depends on**: Phase 14
**Status**: Deferred pending Google Cloud API setup
**Plans**: TBD

### Phase 16: Photography Page CMS
**Goal**: Admin can upload photos and manage display order
**Depends on**: Phase 14
**Plans**: 3 plans

Plans:
- [x] 16-01: Database and storage setup (photos table, photoService)
- [x] 16-02: Admin PhotoManager UI (upload, reorder, delete)
- [x] 16-03: Photography page integration (fetch from DB, remove sample data)

**Key work:**
- photos table in Supabase with storage bucket
- photoService with CRUD operations and storage management
- PhotoManager admin component with upload, reorder, delete
- PhotographyPage fetches from database with loading/error/empty states

### Phase 17: About Page CMS
**Goal**: Admin-editable bio, social links, highlights, and video embed
**Depends on**: Phase 16
**Plans**: 2 plans

Plans:
- [x] 17-01: Database and service layer (about_content table, aboutService)
- [x] 17-02: About page integration (admin UI, public page)

**Key work:**
- about_content singleton table with CHECK (id = 1)
- aboutService with fetch/update operations
- AboutEditor admin component for all About page fields
- AboutPage fetches content from database with fallbacks

### Phase 18: Dynamic Stats
**Goal**: Location count from DB, video count from YouTube API with fallback
**Depends on**: Phase 17
**Plans**: 2 plans

Plans:
- [x] 18-01: Database & service layer (stats columns, count functions)
- [x] 18-02: Admin UI & About page integration

**Key work:**
- Stats columns in about_content (location_count, video_count, country_count, subscriber_count)
- fetchLocationCount and fetchCountryCount functions in locationService
- Stats section in AboutEditor with DB count hints
- AboutPage displays real stats with fallback values

### Phase 19: Instagram Feed Integration
**Goal**: Dynamic Instagram feed component with profile link
**Depends on**: Phase 18
**Plans**: 2 plans

Plans:
- [x] 19-01: Instagram widget database schema (widget type, code, username columns)
- [x] 19-02: Admin UI and About page widget

**Key work:**
- Instagram widget columns in about_content (instagram_widget_type, instagram_widget_code, instagram_username)
- Three widget types: none, lightwidget, official
- InstagramFeed component with dangerouslySetInnerHTML for embed
- Mobile deep link support with 500ms fallback to web URL

---

## Milestone Summary

**Key Decisions:**
- useSearchParams for URL state management (14-01)
- Storage path pattern: photos/{timestamp}-{random}.{ext} for unique filenames (16-01)
- Single-row table pattern with CHECK (id = 1) for singleton config (17-01)
- DB hints pattern: show current database value as reference when admin overrides (18-02)
- dangerouslySetInnerHTML for admin-controlled widget embed code (19-02)
- Mobile deep link with 500ms timeout fallback to web URL (19-02)

**Issues Resolved:**
- Location sharing now possible via URL
- Admin can manage photography page content
- Admin can edit About page bio, social links, highlights
- Dynamic stats replace hardcoded values

**Issues Deferred:**
- Phase 15 (Enhanced Location Popup) - pending Google Cloud API setup
- YouTube API integration - pending channel creation and API key
- Instagram API integration - pending Meta developer app approval

**Technical Debt Incurred:**
- None significant

---

*For current project status, see .planning/ROADMAP.md*
